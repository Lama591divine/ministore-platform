# MiniStore Platform

Учебная платформа на Go в формате микросервисов: `auth`, `catalog`, `order` за **API Gateway**.  
Проект сделан как песочница для практики SRE/DevOps навыков: контейнеризация, миграции БД, e2e-тесты, CI/CD, мониторинг.

## Статус Kubernetes

Развёртывание в **Kubernetes** находится в процессе доработки.  
Манифесты уже есть и позволяют поднять базовый стек, но структура, секреты/конфиги, best practices и окружения будут улучшаться.

## Что внутри

### Сервисы

- **gateway** (HTTP, порт `8080`) — единая точка входа, проксирует запросы в сервисы, валидирует JWT для защищённых ручек.
- **auth** (порт `8081`) — регистрация/логин, хранение пользователей, выдача JWT (HS256).
- **catalog** (порт `8082`) — товары и цены (`price_cents`).
- **order** (порт `8083`) — заказы; при создании заказа запрашивает товары из `catalog` и считает итоговую сумму.

### Хранилище и миграции

- По отдельной **Postgres** базе на сервис: `authdb`, `catalogdb`, `orderdb`.
- Миграции выполняются контейнером **migrate** (`migrate/migrate`) перед стартом сервисов.

### Наблюдаемость

- Structured logs (zap).
- Prometheus metrics на `GET /metrics` (доступ защищён токеном `METRICS_TOKEN`).
- **Prometheus** и **Grafana** поднимаются рядом со стеком (через Docker Compose), чтобы смотреть метрики без внешней инфраструктуры.

## Быстрый старт (Docker Compose)

### Требования

- Docker

### 1) Подготовить переменные окружения

Создай файл `.env` в корне проекта:

```bash
JWT_SECRET=<строка минимум 32 символа>
METRICS_TOKEN=<любой токен, например dev-metrics-token>
